{"ast":null,"code":"import _slicedToArray from\"/Users/carldiederichs/code/carldiederichs/javascript-projects/mern-udemy/places-mern-project/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import Button from'./Button';import'./ImageUpload.css';var ImageUpload=function ImageUpload(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),previewUrl=_useState4[0],setPreviewUrl=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];var filePickerRef=useRef();useEffect(function(){if(!file){return;}var fileReader=new FileReader();fileReader.onload=function(){setPreviewUrl(fileReader.result);};fileReader.readAsDataURL(file);},[file]);var pickedHandler=function pickedHandler(event){var pickedFile;var fileIsValid=isValid;if(event.target.files&&event.target.files.length===1){pickedFile=event.target.files[0];setFile(pickedFile);setIsValid(true);fileIsValid=true;}else{setIsValid(false);fileIsValid=false;}props.onInput(props.id,pickedFile,fileIsValid);};var pickImageHandler=function pickImageHandler(){filePickerRef.current.click();};return/*#__PURE__*/React.createElement(\"div\",{className:\"form-control\"},/*#__PURE__*/React.createElement(\"input\",{id:props.id,ref:filePickerRef,style:{display:'none'},type:\"file\",accept:\".jpg,.png,.jpeg\",onChange:pickedHandler}),/*#__PURE__*/React.createElement(\"div\",{className:\"image-upload \".concat(props.center&&'center')},/*#__PURE__*/React.createElement(\"div\",{className:\"image-upload__preview\"},previewUrl&&/*#__PURE__*/React.createElement(\"img\",{src:previewUrl,alt:\"Preview\"}),!previewUrl&&/*#__PURE__*/React.createElement(\"p\",null,\"Please pick an image.\")),/*#__PURE__*/React.createElement(Button,{type:\"button\",onClick:pickImageHandler},\"PICK IMAGE\")),!isValid&&/*#__PURE__*/React.createElement(\"p\",null,props.errorText));};export default ImageUpload;","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","ImageUpload","props","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","previewUrl","setPreviewUrl","_useState5","_useState6","isValid","setIsValid","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","pickedHandler","event","pickedFile","fileIsValid","target","files","length","onInput","id","pickImageHandler","current","click","createElement","className","ref","style","display","type","accept","onChange","concat","center","src","alt","onClick","errorText"],"sources":["/Users/carldiederichs/code/carldiederichs/javascript-projects/mern-udemy/places-mern-project/react-frontend/src/shared/components/FormElements/ImageUpload.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react'; \n\nimport Button from './Button';\nimport './ImageUpload.css'; \n\nconst ImageUpload = props => {  \n  const [file, setFile] = useState();\n  const [previewUrl, setPreviewUrl] = useState();\n  const [isValid, setIsValid] = useState(false); \n\n  const filePickerRef = useRef();\n\n  useEffect(() => {\n    if (!file) {\n      return; \n    }\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      setPreviewUrl(fileReader.result); \n    };\n    fileReader.readAsDataURL(file);\n  }, [file]);\n\n  const pickedHandler = event => {\n    let pickedFile; \n    let fileIsValid = isValid; \n    if (event.target.files && event.target.files.length === 1) {\n      pickedFile = event.target.files[0];\n      setFile(pickedFile); \n      setIsValid(true);\n      fileIsValid = true; \n    } else {\n      setIsValid(false);\n      fileIsValid = false; \n    }\n    props.onInput(props.id, pickedFile, fileIsValid);\n  };\n\n  const pickImageHandler = () => {\n    filePickerRef.current.click();\n  };\n\n  return (\n    <div className=\"form-control\">\n      <input \n        id={props.id} \n        ref={filePickerRef}\n        style={{ display: 'none' }} \n        type=\"file\" \n        accept=\".jpg,.png,.jpeg\"\n        onChange={pickedHandler}\n      />\n      <div className={`image-upload ${props.center && 'center'}`}>\n        <div className=\"image-upload__preview\">\n          {previewUrl && <img src={previewUrl} alt=\"Preview\" />}\n          {!previewUrl && <p>Please pick an image.</p>}\n        </div>\n        <Button type=\"button\" onClick={pickImageHandler}>\n          PICK IMAGE\n        </Button>\n      </div>\n      {!isValid && <p>{props.errorText}</p>}\n    </div>\n  ); \n};\n\nexport default ImageUpload; "],"mappings":"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"},"metadata":{},"sourceType":"module"}